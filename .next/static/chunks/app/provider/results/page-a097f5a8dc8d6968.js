(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{998:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8291:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8203:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2442:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9617:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},2295:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},2549:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6821:function(e,t,r){Promise.resolve().then(r.bind(r,8923))},8923:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var s=r(7437),a=r(2265),n=r(4809),l=r(1018),i=r(6806),o=r(2898);let c=(0,o.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=r(3008);let m=(0,o.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function h(e){let{response:t,error:r,onClose:n}=e,[o,h]=a.useState(!1),u=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(t,null,2)),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)(l.Zb,{className:"w-full max-w-4xl max-h-[80vh] overflow-hidden bg-gray-800 border-gray-700",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Modal API Debug Response"}),(0,s.jsx)(i.z,{variant:"ghost",size:"icon",onClick:n,className:"text-gray-400 hover:text-white",children:(0,s.jsx)(c,{className:"w-5 h-5"})})]}),r?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-red-400",children:[(0,s.jsx)(c,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"API Error:"})]}),(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-4",children:(0,s.jsx)("pre",{className:"text-red-300 text-sm whitespace-pre-wrap",children:r})})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-green-400",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-semibold",children:"API Response Received"})]}),(0,s.jsx)(i.z,{onClick:u,variant:"secondary",size:"sm",className:"text-gray-300 border-gray-600 hover:border-gray-500",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 mr-2"}),"Copied!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{className:"w-4 h-4 mr-2"}),"Copy JSON"]})})]}),(0,s.jsx)("div",{className:"bg-gray-900/50 border border-gray-600 rounded-lg p-4 max-h-96 overflow-auto",children:(0,s.jsx)("pre",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:JSON.stringify(t,null,2)})}),t&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Response Summary:"}),t.model_path&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,s.jsx)("span",{className:"font-medium",children:"Model:"})," ",t.model_path]}),t.threshold&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,s.jsx)("span",{className:"font-medium",children:"Threshold:"})," ",t.threshold]}),t.labels_on&&Array.isArray(t.labels_on)&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,s.jsxs)("span",{className:"font-medium",children:["Detected Issues (",t.labels_on.length,"):"]}),(0,s.jsx)("ul",{className:"mt-2 space-y-1",children:t.labels_on.map((e,t)=>{let[r,a]=e;return(0,s.jsxs)("li",{className:"ml-4",children:["â€¢ ",r,": ",(100*a).toFixed(1),"%"]},t)})})]}),t.all_scores&&(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,s.jsx)("span",{className:"font-medium",children:"All Scores:"})," ",Object.keys(t.all_scores).length," total labels analyzed"]})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)(i.z,{onClick:n,className:"px-6",children:"Close"})})]})})})}var u=r(583),x=r(3947),g=r(3067),f=r(8203),p=r(2442),y=r(2549),b=r(9617),v=r(2295);let N=(0,o.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var j=r(8291),w=r(998);function k(e){let{analysis:t,frontPhoto:r,sidePhoto:o,rawModalResponse:c,modalError:d,onBack:m,onViewDetails:k,onSaveDraft:E}=e,[C,S]=(0,a.useState)("all"),[D,R]=(0,a.useState)(0),[A,L]=(0,a.useState)(!1),[P,Z]=(0,a.useState)(!1),[z,F]=(0,a.useState)(!0),[M,T]=(0,a.useState)(!1),[J,U]=(0,a.useState)(""),[O,B]=(0,a.useState)(""),[W,_]=(0,a.useState)(!1),H=(e,t)=>(0,x.aW)(e),[I,V]=(0,a.useState)(null),[q,G]=(0,a.useState)(null);a.useEffect(()=>{if(r){let e=URL.createObjectURL(r);V(e)}if(o){let e=URL.createObjectURL(o);G(e)}return()=>{I&&URL.revokeObjectURL(I),q&&URL.revokeObjectURL(q)}},[r,o,I,q]);let K=a.useMemo(()=>{let e=[];return I&&e.push({src:I,label:"Front View",timestamp:new Date().toLocaleDateString()}),q&&e.push({src:q,label:"Side View",timestamp:new Date().toLocaleDateString()}),0===e.length&&e.push({src:"/Sydney Adams Front.png",label:"Reference Front",timestamp:"2024-01-15"},{src:"/Sydney Adams Side.png",label:"Reference Side",timestamp:"2024-01-15"}),e},[I,q]),X=(0,u.hv)(),$=e=>Math.round(Math.min(100,Math.max(60,20*Math.pow(e/100,.7)+65))),Q=X.reduce((e,r)=>{let s=t.issues.filter(e=>e.area===r);if(s.length>0){let t=s.reduce((e,t)=>e+t.confidence,0)/s.length;e[r]=$(t)}else e[r]=100;return e},{}),Y=a.useMemo(()=>{if(0===t.issues.length)return 100;let e=t.issues.reduce((e,t)=>e+t.confidence,0)/t.issues.length;return $(e)},[t.issues]),ee=a.useMemo(()=>{let e=t.issues;return P||(e=e.filter(e=>{let t=(95-e.confidence)/35;return t>.5})),"all"!==C&&(e=e.filter(e=>e.area===C)),e},[t.issues,P,C]),et=async()=>{if(!J.trim()){alert("Please enter a patient name before saving the draft.");return}_(!0);try{E&&(await E(J.trim(),t),F(!1))}catch(e){console.error("Error saving draft:",e),alert("Failed to save draft. Please try again.")}finally{_(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black p-4",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)(i.z,{variant:"ghost",onClick:m,className:"flex items-center gap-2 text-gray-400 hover:text-white hover:bg-gray-800/50 px-3 py-2 rounded-md transition-all duration-200",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4"}),"Back to Dashboard"]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4"}),"Analysis completed: ",new Date().toLocaleDateString()]}),(c||d)&&(0,s.jsx)(i.z,{onClick:()=>L(!0),variant:"secondary",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400/10",children:"Debug API Response"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white",children:"AI Analysis Results"}),z&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-orange-500/20 border border-orange-500/50 rounded-full",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-orange-300 text-sm font-medium",children:"Draft"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Patient Name:"}),M?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:O,onChange:e=>B(e.target.value),className:"px-3 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter patient name",autoFocus:!0}),(0,s.jsxs)(i.z,{size:"sm",onClick:()=>{U(O),T(!1)},className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-md border border-green-500 hover:shadow-lg transition-all duration-200",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),"Save"]}),(0,s.jsxs)(i.z,{size:"sm",onClick:()=>{B(J),T(!1)},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md border border-red-500 hover:shadow-lg transition-all duration-200",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),"Cancel"]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-white font-medium",children:J||"Unnamed Patient"}),(0,s.jsxs)(i.z,{size:"sm",onClick:()=>{B(J),T(!0)},className:"bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800 text-white px-3 py-1 rounded-md border border-gray-600 hover:shadow-lg transition-all duration-200",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]})]}),(0,s.jsxs)("p",{className:"text-gray-300 text-lg",children:["Comprehensive facial analysis with ",t.issues.length," ","findings identified"]})]}),z&&E&&(0,s.jsx)("div",{className:"flex justify-end mb-6",children:(0,s.jsxs)(i.z,{onClick:et,disabled:W||!J.trim(),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),W?"Saving...":"Save Draft"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(l.Zb,{className:"p-6 bg-gray-800/50 border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,s.jsx)(N,{className:"w-5 h-5 mr-2"}),"Patient Photos"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"relative h-64 bg-gray-700/30 rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:K[D].src,alt:K[D].label,className:"w-full h-full object-cover"}),(0,s.jsx)(i.z,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70",onClick:()=>R(e=>e>0?e-1:K.length-1),children:(0,s.jsx)(g.Z,{className:"w-4 h-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70",onClick:()=>R(e=>e<K.length-1?e+1:0),children:(0,s.jsx)(j.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"mt-2 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:K[D].label}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:K[D].timestamp})]})]}),(0,s.jsx)("div",{className:"flex justify-center gap-2 mt-4",children:K.map((e,t)=>(0,s.jsx)("button",{className:"w-2 h-2 rounded-full transition-colors ".concat(t===D?"bg-blue-500":"bg-gray-600"),onClick:()=>R(t)},t))})]}),(0,s.jsxs)(l.Zb,{className:"p-6 bg-gray-800/50 border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,s.jsx)(w.Z,{className:"w-5 h-5 mr-2"}),"Overall Analysis"]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl font-bold mb-2 bg-gradient-to-r bg-clip-text text-transparent ".concat(Y>=85?"from-green-400 to-green-500":Y>=75?"from-green-300 to-green-400":Y>=65?"from-yellow-400 to-yellow-500":Y>=55?"from-orange-400 to-orange-500":"from-red-400 to-red-500"),children:Y}),(0,s.jsx)("p",{className:"text-gray-300",children:"Overall Score"}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-4",children:(0,s.jsx)(n.E.div,{className:"h-2 rounded-full transition-all duration-500 bg-gradient-to-r ".concat(Y>=85?"from-green-400 to-green-500":Y>=75?"from-green-300 to-green-400":Y>=65?"from-yellow-400 to-yellow-500":Y>=55?"from-orange-400 to-orange-500":"from-red-400 to-red-500"),initial:{width:0},animate:{width:"".concat(Y,"%")},transition:{duration:1.5,delay:.5}})})]})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(l.Zb,{className:"p-4 bg-gray-800/50 border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"text-sm text-gray-300",children:"Show:"}),(0,s.jsx)("button",{onClick:()=>Z(!1),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(P?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-blue-600 text-white"),children:"Recommended to Address First"}),(0,s.jsx)("button",{onClick:()=>Z(!0),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(P?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"All Concerns"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[ee.length," issues shown"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("button",{onClick:()=>S("all"),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat("all"===C?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:["All Areas (",ee.length,")"]}),X.map(e=>{let t=Q[e];return(0,s.jsx)("button",{onClick:()=>S(e),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(C===e?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-bold text-white",children:e}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold text-white ".concat(t>=85?"bg-gradient-to-r from-green-500 to-green-600":t>=75?"bg-gradient-to-r from-green-400 to-green-500":t>=65?"bg-gradient-to-r from-yellow-500 to-yellow-600":t>=55?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gradient-to-r from-red-500 to-red-600"),children:t})]})},e)})]})]}),(0,s.jsx)("div",{className:"space-y-6 h-[calc(100vh-400px)] overflow-y-auto pr-2",children:(()=>{let e=ee.reduce((e,t)=>(e[t.area]||(e[t.area]=[]),e[t.area].push(t),e),{});return Object.entries(e).map((e,t)=>{let[r,a]=e;return(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,s.jsxs)(l.Zb,{className:"p-6 bg-gray-800/50 border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:r}),(0,s.jsx)("span",{className:"text-sm px-2 py-1 rounded-full ".concat((0,u.qt)(Q[r])," ").concat((0,u.Uz)(Q[r])),children:Q[r]})]}),(0,s.jsx)("div",{className:"space-y-4",children:a.map((e,t)=>{let r=$(e.confidence);return(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-6 bg-gradient-to-r from-blue-900/30 to-cyan-900/30 border-blue-700/50 hover:border-blue-600/70 transition-all duration-300 backdrop-blur-sm hover:shadow-xl hover:shadow-blue-500/20 group rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-6",children:[(0,s.jsx)("div",{className:"w-1/2",children:(0,s.jsx)("div",{className:"relative h-64",children:(0,s.jsx)("img",{src:H(e.name,e.area),alt:"".concat(e.name," example"),className:"w-full h-full object-contain rounded-2xl border border-gray-600/50",onError:e=>{let t=e.target;t.src=(0,x._O)()}})})}),(0,s.jsxs)("div",{className:"w-1/2 h-64 flex flex-col justify-between",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,s.jsx)("h4",{className:"text-lg font-semibold text-white mb-1 line-clamp-2",children:e.name})}),(0,s.jsx)("p",{className:"text-gray-300 text-sm line-clamp-3",children:e.description})]}),(0,s.jsx)("div",{className:"flex items-center space-x-3 mb-3",children:(0,s.jsxs)("div",{className:"text-2xl font-bold bg-gradient-to-r bg-clip-text text-transparent ".concat(r>=95?"from-green-500 to-emerald-500":r>=85?"from-green-400 to-green-500":r>=75?"from-lime-400 to-green-400":r>=65?"from-yellow-400 to-lime-400":r>=55?"from-orange-400 to-yellow-400":r>=45?"from-red-400 to-orange-400":"from-red-500 to-red-400"),children:[r,"%"]})}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[(0,s.jsx)("span",{children:"Significant"}),(0,s.jsx)("span",{children:"Subtle"})]}),(0,s.jsx)("div",{className:"relative h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,s.jsx)(n.E.div,{className:"absolute inset-0 bg-gradient-to-r ".concat(r>=95?"from-green-500 to-emerald-500":r>=85?"from-green-400 to-green-500":r>=75?"from-lime-400 to-green-400":r>=65?"from-yellow-400 to-lime-400":r>=55?"from-orange-400 to-yellow-400":r>=45?"from-red-400 to-orange-400":"from-red-500 to-red-400"," rounded-full"),initial:{width:0},animate:{width:"".concat(r,"%")},transition:{duration:1.5,delay:.5}})})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500/10 to-green-500/10 border border-blue-500/20 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-gray-300",children:[(0,s.jsx)("span",{className:"font-semibold text-blue-400",children:"Common Causes:"})," ",e.causes?e.causes.join(", "):"Age-related changes, sun exposure, genetics, lifestyle factors"]})})})]})]})},e.name)})})]})},r)})})()})]})]})]}),A&&(0,s.jsx)(h,{response:c,error:d,onClose:()=>L(!1)})]})}var E=r(4033);function C(){let e=(0,E.useRouter)(),[t,r]=(0,a.useState)(null),[n,l]=(0,a.useState)(null),[i,o]=(0,a.useState)(null);(0,a.useEffect)(()=>{let t=localStorage.getItem("analysisResult");if(t)try{r(JSON.parse(t))}catch(t){console.error("Error parsing analysis result:",t),e.push("/provider/upload")}else e.push("/provider/upload");(()=>{let e=localStorage.getItem("frontPhoto"),t=localStorage.getItem("sidePhoto");if(e)try{let t=e.split(",")[1],r=atob(t),s=Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);let a=new Uint8Array(s),n=new File([a],"front-photo.jpg",{type:"image/jpeg"});l(n)}catch(e){console.error("Error loading front photo:",e)}if(t)try{let e=t.split(",")[1],r=atob(e),s=Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);let a=new Uint8Array(s),n=new File([a],"side-photo.jpg",{type:"image/jpeg"});o(n)}catch(e){console.error("Error loading side photo:",e)}})()},[e]);let c=async(e,t)=>{console.log("Saving draft for patient:",e,t),await new Promise(e=>setTimeout(e,1e3)),alert("Draft saved successfully for ".concat(e,"!"))};return t?(0,s.jsx)(k,{analysis:t.analysis,frontPhoto:n,sidePhoto:i,rawModalResponse:t.rawResponse,modalError:t.error,onBack:()=>{e.push("/provider")},onViewDetails:e=>{console.log("View details for area:",e)},onSaveDraft:c}):(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading results..."})]})})}},6806:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(7437),a=r(2265),n=r(4949),l=r(6061),i=r(345);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-white text-black hover:bg-gray-100 hover:scale-105 shadow-lg",primary:"bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 shadow-lg",secondary:"bg-gray-800 text-white hover:bg-gray-700 hover:scale-105",ghost:"hover:bg-gray-100 hover:text-gray-900",destructive:"bg-red-600 text-white hover:bg-red-700"},size:{default:"h-12 px-8 py-3",sm:"h-9 rounded-md px-3",lg:"h-14 rounded-full px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,s.jsx)(m,{className:(0,i.cn)(o({variant:a,size:l,className:r})),ref:t,...d})});c.displayName="Button"},1018:function(e,t,r){"use strict";r.d(t,{Zb:function(){return l}});var s=r(7437),a=r(2265),n=r(345);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-2xl border border-gray-800 bg-gray-900/50 backdrop-blur-sm text-white shadow-xl",r),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-gray-400",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});m.displayName="CardFooter"},3947:function(e,t,r){"use strict";r.d(t,{_O:function(){return a},aW:function(){return s}});let s=e=>{let t=e.replace(/[^a-zA-Z0-9\s-]/g,"").replace(/\s+/g," ").trim(),r=encodeURIComponent("Finding=".concat(t,".png"));return"/Images/Findings/".concat(r)},a=()=>"/Images/Findings/Finding=General.png"},583:function(e,t,r){"use strict";r.d(t,{Kn:function(){return l},R$:function(){return i},Uz:function(){return o},hv:function(){return n},qt:function(){return c},wR:function(){return a}});let s={"Forehead Wrinkles":"Skin","Crow's Feet Wrinkles":"Skin","Glabella Wrinkles":"Skin","Under Eye Wrinkles":"Skin","Perioral Wrinkles":"Skin","Bunny Lines":"Skin","Neck Lines":"Skin","Dark Spots":"Skin","Red Spots":"Skin",Scars:"Skin","Dry Skin":"Skin",Whiteheads:"Skin",Blackheads:"Skin","Under Eye Dark Circles":"Eyes","Crepey Skin":"Skin","Rosacea [DEPRECATED]":"Skin","Nasolabial Folds":"Skin","Marionette Lines":"Skin","Temporal Hollow":"Forehead","Brow Asymmetry":"Forehead","Flat Forehead":"Forehead","Brow Ptosis":"Forehead","Excess Upper Eyelid Skin":"Eyes","Lower Eyelid - Excess Skin":"Eyes","Upper Eyelid Droop":"Eyes","Lower Eyelid Sag":"Eyes","Lower Eyelid Bags":"Eyes","Under Eye Hollow":"Eyes","Upper Eye Hollow":"Eyes","Mid Cheek Flattening":"Cheeks","Cheekbone - Not Prominent":"Cheeks","Heavy Lateral Cheek":"Cheeks","Crooked Nose":"Nose","Droopy Tip":"Nose","Dorsal Hump":"Nose","Tip Droop When Smiling":"Nose","Thin Lips":"Lips","Lacking Philtral Column":"Lips","Long Philtral Column":"Lips","Gummy Smile":"Lips","Asymmetric Lips":"Lips","Dry Lips":"Lips","Lip Thinning When Smiling":"Lips","Retruded Chin":"Jawline","Over-Projected Chin":"Jawline","Asymmetric Chin":"Jawline",Jowls:"Jawline","Lower Cheeks - Volume Depletion":"Jawline","Ill-Defined Jawline":"Jawline","Asymmetric Jawline":"Jawline","Masseter Hypertrophy":"Jawline","Prejowl Sulcus":"Jawline","Loose Neck Skin":"Jawline","Platysmal Bands":"Jawline","Excess/Submental Fullness":"Jawline","Over-Projected":"Nose","Over-Rotated":"Nose","Under-Projected":"Nose","Under-Rotated":"Nose","Nasal Bone - Too Wide":"Nose","Nasal Tip Too Wide":"Nose","Nasal Tip Too Narrow":"Nose","Nostril Base - Too Wide":"Nose","Negative Canthal Tilt":"Eyes","Wide Chin":"Jawline","Wide Jawline":"Jawline","Narrow Jawline":"Jawline",Oily:"Skin","Acne [DEPRECATED]":"Skin","Alar Hang [DEPRECATED]":"Nose","Alar Retraction [DEPRECATED]":"Nose","Asymmetric Nostril Base [DEPRECATED]":"Nose","Cheilosis [DEPRECATED]":"Lips","Columellar Hang [DEPRECATED]":"Nose","Columellar Retraction [DEPRECATED]":"Nose","Deep Labiomental Groove [DEPRECATED]":"Lips","Deep Radix [DEPRECATED]":"Nose","Shallow Labiomental Groove [DEPRECATED]":"Lips","Shallow Radix [DEPRECATED]":"Nose","Obtuse Cervicomental Angle [DEPRECATED]":"Jawline"};function a(e){return s[e]||"Other"}function n(){let e=new Set(Object.values(s));return Array.from(e).sort()}function l(e){return Math.round(95-35*Math.max(0,Math.min(1,e)))}function i(e){return e>=90?"A":e>=80?"B":e>=70?"C":e>=60?"D":"F"}function o(e){return e>=90?"text-green-400":e>=80?"text-blue-400":e>=70?"text-yellow-400":e>=60?"text-orange-400":"text-red-400"}function c(e){return e>=90?"bg-green-400/20":e>=80?"bg-blue-400/20":e>=70?"bg-yellow-400/20":e>=60?"bg-orange-400/20":"bg-red-400/20"}},345:function(e,t,r){"use strict";r.d(t,{bJ:function(){return o},cn:function(){return a},sS:function(){return i},zn:function(){return l}});var s=r(7042);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.W)(t)}function n(){let e=document.documentElement;e.style.setProperty("--app-height","".concat(window.innerHeight,"px"))}function l(){n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",()=>{setTimeout(n,100)})}function i(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}function o(e){return new Promise((t,r)=>{let s=new FileReader;s.onload=e=>{var r;return t(null===(r=e.target)||void 0===r?void 0:r.result)},s.onerror=r,s.readAsDataURL(e)})}}},function(e){e.O(0,[575,971,472,744],function(){return e(e.s=6821)}),_N_E=e.O()}]);